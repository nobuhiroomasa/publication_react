# サンプルカフェ CMS デモ

公開向けの公式サイトと管理者専用のコンソールを備えた、ホスピタリティ業界向けの CMS デモです。コンテンツ管理、ページごとのローディングアニメーション、洗練されたカフェの世界観をポートフォリオで紹介することを目的としています。

## 特長

- **React 公開サイト**: フロントエンドを React ベースで再構成し、トップ/アクセス/予約/ギャラリー/ストーリー/ハイライトの各ページを SPA として配信します。
- **スタイリッシュなローディング演出**: すべてのページでカフェやダイニングを意識した体験を演出します。React でも既存の CSS/アニメーションをそのまま継承しています。
- **API ドリブン**: Flask は `/api/*` エンドポイントでコンテンツ・ギャラリー・お知らせ情報を JSON で提供し、React が自動取得します。
- **管理コンソール**: 認証必須の管理画面を備え、デフォルト認証情報 `admin` / `admin1234` を PBKDF2 による強力なハッシュで保護します。
- **コンテンツ管理**: ヒーローコピー、本文、ハイライト文、画像 URL、セクションごとの構造化メタ情報を編集できます。
- **ギャラリーツール**: 画像のアップロード・削除に対応し、サーバー上で安全に管理します。
- **ハイライトとお知らせ**: 季節限定メニューや最新情報を発信できます。
- **SQLite データベース**: 初回起動時に自動でサンプルデータと安全な資格情報を投入します。

## セットアップ

### バックエンド (Flask)

1. **依存パッケージのインストール**

   ```bash
   pip install -r requirements.txt
   ```

2. **開発サーバーの起動**

   ```bash
   flask --app app run
   ```

   初回起動時に SQLite データベース (`site.db`) が生成され、デモ用コンテンツが投入されます。

3. **アクセス方法**

   - 公開サイト: [http://localhost:5000](http://localhost:5000)
   - 管理コンソール: [http://127.0.0.1:5000/admin/login](http://localhost:5000/admin/login)

4. **ログイン情報**

   - ID: `admin`
   - パスワード: `admin1234`

   ログイン後はユーザーテーブルを更新し、速やかに認証情報を変更してください（将来的な改良でパスワード変更 UI を追加予定）。

### フロントエンド (React)

`frontend/` ディレクトリは Vite + React で構成された開発用ソースコードです。Node.js (18+) を用意し、以下の手順で起動します。

```bash
cd frontend
npm install
npm run dev
```

開発サーバーは `http://localhost:5173` で動作し、`/api` および `/static` へのアクセスは自動で Flask (ポート 5000) にプロキシされます。UI を調整したら `npm run build` で `frontend/dist/` に本番配信用のアセットが出力され、Flask からそのまま配信できます。

## プロジェクト構成

```
app.py                # Flask アプリケーションファクトリとルート定義
requirements.txt      # Python 依存パッケージ
site.db               # SQLite データベース（初回起動時に生成）
frontend/dist/        # React フロントエンドのビルド済みアセット (Flask が配信)
frontend/src/         # React/Vite の開発用ソースコード
frontend/vite.config.js # Vite 設定 (API プロキシやビルド出力先を定義)
templates/            # 管理画面の Jinja2 テンプレート
static/css/           # 公開サイトと管理画面のスタイル
static/js/            # ナビゲーションやローディング演出などのフロントエンド処理
static/images/        # ヒーロー・ギャラリー用の SVG 画像
static/uploads/       # 管理画面からアップロードされた画像
```

## 補足

- テキストやビジュアルはすべて「サンプル」を想定したデモ用コンテンツです。
- デザインテイストはショーケースとしての統一感を保つため固定されていますが、文言や素材は管理画面から自由に変更できます。
- React フロントエンドは `frontend/dist` 以下のプレーン ES Modules で構成されており、Node.js なしで Flask から直接配信できます。
- パスワードは Werkzeug の `generate_password_hash`（PBKDF2-SHA256）で安全に保存されます。
- パスワードリセットやアクセス解析などの機能は、必要に応じて容易に拡張できます。
# loveapp
